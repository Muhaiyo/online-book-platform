import React, { useState, useEffect } from 'react';
import { Link, Navigate } from 'react-router-dom';
import '../styles/Header.css';

const Header = () => {
    const [isLoggedIn, setIsLoggedIn] = useState(false);
    const [userEmail, setUserEmail] = useState('');
    const [password, setPassword] = useState('');
    const [user, setUser] = useState(null);

    useEffect(() => {
        const storedUser = JSON.parse(localStorage.getItem('user'));
        if (storedUser) {
            setUserEmail(storedUser.email);
            setPassword(storedUser.password);
            setIsLoggedIn(true);
            setUser(storedUser);
        }
    }, []);

    const handleLogout = () => {
        localStorage.removeItem('user');
        localStorage.removeItem('cart');
        setUserEmail('');
        setPassword('');
        setIsLoggedIn(false);
        setUser(null);
    };

    const handleLogin = () => {
        const email = '';
        const password = '';
        const userData = { email, password };
        localStorage.setItem('user', JSON.stringify(userData));
        setUserEmail(email);
        setPassword(password);
        setIsLoggedIn(true);
        setUser(userData);
    };

    return (
        <header className="header">
            <div className="top-bar">
                <div className="contact-number">
                    <svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3.98047 0.106456C4.51808 -0.058503 5.09499 -0.0310978 5.61516 0.184109C6.13533 0.399317 6.56738 0.789342 6.8394 1.28926L6.93031 1.47556L7.74364 3.31478C7.99047 3.87303 8.0706 4.49281 7.97404 5.09704C7.87749 5.70126 7.60853 6.26327 7.2006 6.71316L7.0372 6.8782L5.75578 8.09476C5.52481 8.31732 5.69804 9.17879 6.53348 10.6517C7.28537 11.977 7.89721 12.5959 8.19822 12.6297H8.25105L8.31616 12.6172L10.8348 11.8332C11.1733 11.7276 11.5345 11.7234 11.8752 11.8212C12.216 11.919 12.5219 12.1146 12.7563 12.3846L12.8681 12.5284L14.5353 14.879C14.862 15.3397 15.0248 15.9 14.9969 16.4675C14.969 17.035 14.752 17.5758 14.3817 18.0011L14.2318 18.1586L13.5659 18.8013C12.968 19.3776 12.22 19.767 11.4109 19.9233C10.6017 20.0795 9.76556 19.996 9.00171 19.6827C6.62439 18.7075 4.46453 16.4794 2.50248 13.021C0.536733 9.55389 -0.280279 6.53186 0.0846125 3.94369C0.19503 3.16133 0.511597 2.424 1.00069 1.81001C1.48979 1.19603 2.13315 0.728318 2.86245 0.456546L3.09957 0.376525L3.98047 0.106456Z" fill="white" />
                    </svg>+91 8374902234
                </div>
                <div className="social-icons">
                    <a href="#" target="_blank" rel="noopener noreferrer">
                        <svg width="11" height="21" viewBox="0 0 11 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.05272 0C5.23205 0 3.57771 1.48976 3.57771 4.88429V7.87097H0V11.4487H3.57771V20.0352H7.15543V11.4487H10.0176L10.7331 7.87097H7.15543V5.48964C7.15543 4.21097 7.57259 3.57771 8.77255 3.57771H10.7331V0.146686C10.394 0.100891 9.40581 0 8.05272 0Z" fill="white" />
                        </svg>
                    </a>
                    <a href="https://www.twitter.com" target="_blank" rel="noopener noreferrer">
                        <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5.29486 0C2.75397 0 0.666016 2.08509 0.666016 4.62884V11.1131C0.666016 13.654 2.75111 15.7419 5.29486 15.7419H11.7791C14.32 15.7419 16.408 13.6568 16.408 11.1131V4.62956C16.408 2.08795 14.3229 0 11.7791 0H5.29486ZM5.29486 1.43109H11.7791C12.1992 1.43052 12.6153 1.51285 13.0035 1.67335C13.3917 1.83385 13.7445 2.06938 14.0415 2.36643C14.3386 2.66348 14.5741 3.01622 14.7346 3.40445C14.8951 3.79267 14.9774 4.20875 14.9769 4.62884V11.1131C14.9774 11.5332 14.8951 11.9493 14.7346 12.3375C14.5741 12.7257 14.3386 13.0785 14.0415 13.3755C13.7445 13.6726 13.3917 13.9081 13.0035 14.0686C12.6153 14.2291 12.1992 14.3114 11.7791 14.3109H5.29558C4.87542 14.3115 4.45927 14.2293 4.07096 14.0688C3.68265 13.9083 3.32982 13.6728 3.0327 13.3758C2.73557 13.0787 2.49998 12.7259 2.33943 12.3377C2.17889 11.9494 2.09654 11.5332 2.0971 11.1131V4.62956C2.09644 4.20941 2.1787 3.79325 2.33916 3.40494C2.49962 3.01663 2.73513 2.66381 3.03219 2.36668C3.32925 2.06955 3.68202 1.83396 4.0703 1.67342C4.45857 1.51287 4.87471 1.43052 5.29486 1.43109ZM12.763 2.99669C12.6777 2.99631 12.5933 3.01282 12.5144 3.04527C12.4356 3.07771 12.364 3.12545 12.3037 3.18572C12.2435 3.246 12.1957 3.31762 12.1633 3.39644C12.1308 3.47526 12.1143 3.55973 12.1147 3.64497C12.1147 4.00561 12.4023 4.29326 12.763 4.29326C12.8483 4.29373 12.9328 4.27729 13.0117 4.24489C13.0906 4.21248 13.1623 4.16476 13.2227 4.10448C13.283 4.04419 13.3308 3.97255 13.3633 3.89367C13.3958 3.8148 13.4124 3.73027 13.412 3.64497C13.4124 3.55967 13.3958 3.47514 13.3633 3.39627C13.3308 3.3174 13.283 3.24575 13.2227 3.18547C13.1623 3.12519 13.0906 3.07746 13.0117 3.04506C12.9328 3.01266 12.8483 2.99622 12.763 2.99669ZM8.53698 3.57771C6.17569 3.57771 4.24373 5.50968 4.24373 7.87097C4.24373 10.2323 6.17569 12.1642 8.53698 12.1642C10.8983 12.1642 12.8302 10.2323 12.8302 7.87097C12.8302 5.50968 10.8983 3.57771 8.53698 3.57771ZM8.53698 5.0088C10.1276 5.0088 11.3992 6.28032 11.3992 7.87097C11.3992 9.46162 10.1276 10.7331 8.53698 10.7331C6.94633 10.7331 5.67481 9.46162 5.67481 7.87097C5.67481 6.28032 6.94633 5.0088 8.53698 5.0088Z" fill="white" />
                        </svg>
                    </a>
                    <a href="">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.23102 5.42026e-07C1.9828 -0.000187454 1.73697 0.0485298 1.50757 0.14337C1.27818 0.238209 1.06972 0.377313 0.894097 0.552736C0.718475 0.728158 0.579135 0.936461 0.484034 1.16575C0.388934 1.39503 0.339938 1.64081 0.339844 1.88903C0.339844 2.93372 1.18633 3.79953 2.22888 3.79953C3.27285 3.79953 4.12005 2.93373 4.12005 1.89046C4.12024 1.64227 4.07152 1.39648 3.97667 1.16712C3.88182 0.93777 3.74271 0.729356 3.56728 0.553791C3.39184 0.378227 3.18354 0.238953 2.95425 0.143931C2.72497 0.048909 2.47921 4.70804e-07 2.23102 5.42026e-07ZM11.4558 5.0088C9.86801 5.0088 8.95998 5.83883 8.5235 6.66456H8.47771V5.23133H5.34864V15.7419H8.60937V10.5392C8.60937 9.16825 8.71241 7.84306 10.409 7.84306C12.0812 7.84306 12.1055 9.40652 12.1055 10.6258V15.7419H15.3662V9.96894C15.3662 7.14398 14.7587 5.0088 11.4558 5.0088ZM0.599586 5.23062V15.7419H3.86246V5.23062H0.599586Z" fill="white" />
                        </svg>
                    </a>
                    <a href="">
                        <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.4718 1.65597C16.8288 1.94063 16.1467 2.12708 15.4483 2.20909C16.1836 1.7688 16.7339 1.07638 16.9967 0.260666C16.3052 0.670483 15.5491 0.959862 14.7607 1.11645C14.2776 0.600084 13.6504 0.240986 12.9606 0.0858518C12.2708 -0.0692824 11.5502 -0.0132744 10.8926 0.246593C10.2351 0.50646 9.67088 0.958163 9.27346 1.54297C8.87604 2.12777 8.66376 2.81862 8.66424 3.52569C8.66424 3.8026 8.695 4.07093 8.75726 4.32781C7.35588 4.25883 5.98476 3.89534 4.73325 3.26102C3.48175 2.6267 2.37795 1.73579 1.49378 0.646343C1.17964 1.18408 1.01487 1.79597 1.01652 2.41874C1.01652 3.64017 1.63689 4.71921 2.58427 5.35103C2.02469 5.33328 1.47751 5.18164 0.988611 4.90883V4.95391C0.988127 5.76761 1.26941 6.55637 1.78466 7.18614C2.29991 7.81592 3.01733 8.24786 3.815 8.40855C3.29628 8.5508 2.7518 8.57186 2.22364 8.47009C2.44861 9.1701 2.88662 9.78237 3.47647 10.2214C4.06632 10.6604 4.77856 10.9041 5.5137 10.9187C4.78288 11.4923 3.9461 11.9162 3.05127 12.166C2.15643 12.4159 1.22111 12.4868 0.298828 12.3748C1.90917 13.4111 3.78405 13.9614 5.69903 13.9597C12.1804 13.9597 15.7252 8.5903 15.7252 3.93355C15.7252 3.78328 15.7195 3.62872 15.7138 3.47774C16.4025 2.97905 16.9977 2.36255 17.4718 1.65669V1.65597Z" fill="white" />
                        </svg>
                    </a>
                    <a href="">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4.69755 0C3.55891 0 2.4669 0.452324 1.66176 1.25747C0.856621 2.06261 0.404297 3.15461 0.404297 4.29326V9.30205C0.404297 10.4407 0.856621 11.5327 1.66176 12.3378C2.4669 13.143 3.55891 13.5953 4.69755 13.5953H9.70635C10.845 13.5953 11.937 13.143 12.7421 12.3378C13.5473 11.5327 13.9996 10.4407 13.9996 9.30205V5.72434C13.9996 5.53457 13.9242 5.35257 13.79 5.21838C13.6558 5.08419 13.4738 5.0088 13.2841 5.0088H12.5685C12.3787 5.0088 12.1967 4.93341 12.0626 4.79922C11.9284 4.66503 11.853 4.48303 11.853 4.29326C11.853 3.15461 11.4007 2.06261 10.5955 1.25747C9.79037 0.452324 8.69836 0 7.55972 0H4.69755ZM4.69755 3.57771H7.55972C7.95327 3.57771 8.27526 3.89971 8.27526 4.29326C8.27526 4.6868 7.95327 5.0088 7.55972 5.0088H4.69755C4.304 5.0088 3.98201 4.6868 3.98201 4.29326C3.98201 3.89971 4.304 3.57771 4.69755 3.57771ZM4.69755 8.58651H9.70635C10.0999 8.58651 10.4219 8.9085 10.4219 9.30205C10.4219 9.6956 10.0999 10.0176 9.70635 10.0176H4.69755C4.304 10.0176 3.98201 9.6956 3.98201 9.30205C3.98201 8.9085 4.304 8.58651 4.69755 8.58651Z" fill="white" />
                        </svg>
                    </a>
                </div>
            </div>
            <nav className="navigation">
                <ul>
                    <li><Link to="/">HOME</Link></li>
                    <li><Link to="/about-us">ABOUT US</Link></li>
                    <li><Link to="/products">PRODUCTS</Link></li>
                    <li><Link to="/blog">BLOG</Link></li>
                    <li><Link to="/contact-us">CONTACT US</Link></li>
                    {user ? (
                        <div className='user'>
                            <span>{user.email}</span>
                            <button onClick={handleLogout}>Logout</button>
                            <Link to="/cart"><img src="https://www.svgrepo.com/show/34974/shopping-cart.svg" alt="" /></Link>
                        </div>
                    ) : (
                        <div className='user'>
                            <Link to="/register">Register</Link>
                        </div>
                    )}
                </ul>
            </nav>

        </header>
    );
};

export default Header;
